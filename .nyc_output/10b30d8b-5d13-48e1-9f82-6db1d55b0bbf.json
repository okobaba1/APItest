{"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\test\\test.js":{"path":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\test\\test.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":12},"end":{"line":5,"column":51}},"2":{"start":{"line":7,"column":16},"end":{"line":7,"column":60}},"3":{"start":{"line":9,"column":14},"end":{"line":9,"column":55}},"4":{"start":{"line":11,"column":11},"end":{"line":11,"column":52}},"5":{"start":{"line":13,"column":13},"end":{"line":13,"column":36}},"6":{"start":{"line":14,"column":13},"end":{"line":14,"column":36}},"7":{"start":{"line":15,"column":13},"end":{"line":15,"column":36}},"8":{"start":{"line":17,"column":0},"end":{"line":17,"column":43}},"9":{"start":{"line":19,"column":0},"end":{"line":19,"column":28}},"10":{"start":{"line":21,"column":0},"end":{"line":21,"column":9}},"11":{"start":{"line":22,"column":0},"end":{"line":103,"column":3}},"12":{"start":{"line":23,"column":2},"end":{"line":27,"column":5}},"13":{"start":{"line":24,"column":4},"end":{"line":24,"column":46}},"14":{"start":{"line":26,"column":4},"end":{"line":26,"column":48}},"15":{"start":{"line":28,"column":2},"end":{"line":37,"column":5}},"16":{"start":{"line":29,"column":4},"end":{"line":36,"column":7}},"17":{"start":{"line":30,"column":6},"end":{"line":30,"column":34}},"18":{"start":{"line":31,"column":6},"end":{"line":31,"column":39}},"19":{"start":{"line":32,"column":6},"end":{"line":32,"column":45}},"20":{"start":{"line":33,"column":6},"end":{"line":33,"column":50}},"21":{"start":{"line":34,"column":6},"end":{"line":34,"column":47}},"22":{"start":{"line":35,"column":6},"end":{"line":35,"column":13}},"23":{"start":{"line":38,"column":2},"end":{"line":51,"column":5}},"24":{"start":{"line":39,"column":4},"end":{"line":50,"column":7}},"25":{"start":{"line":42,"column":6},"end":{"line":42,"column":34}},"26":{"start":{"line":43,"column":6},"end":{"line":43,"column":39}},"27":{"start":{"line":44,"column":6},"end":{"line":44,"column":45}},"28":{"start":{"line":45,"column":6},"end":{"line":45,"column":50}},"29":{"start":{"line":46,"column":6},"end":{"line":46,"column":47}},"30":{"start":{"line":47,"column":6},"end":{"line":47,"column":59}},"31":{"start":{"line":48,"column":6},"end":{"line":48,"column":44}},"32":{"start":{"line":49,"column":6},"end":{"line":49,"column":13}},"33":{"start":{"line":52,"column":2},"end":{"line":64,"column":5}},"34":{"start":{"line":53,"column":4},"end":{"line":63,"column":7}},"35":{"start":{"line":56,"column":6},"end":{"line":56,"column":34}},"36":{"start":{"line":57,"column":6},"end":{"line":57,"column":39}},"37":{"start":{"line":58,"column":6},"end":{"line":58,"column":45}},"38":{"start":{"line":59,"column":6},"end":{"line":59,"column":50}},"39":{"start":{"line":60,"column":6},"end":{"line":60,"column":47}},"40":{"start":{"line":61,"column":6},"end":{"line":61,"column":43}},"41":{"start":{"line":62,"column":6},"end":{"line":62,"column":13}},"42":{"start":{"line":65,"column":2},"end":{"line":83,"column":5}},"43":{"start":{"line":66,"column":15},"end":{"line":74,"column":5}},"44":{"start":{"line":76,"column":4},"end":{"line":82,"column":7}},"45":{"start":{"line":77,"column":6},"end":{"line":77,"column":34}},"46":{"start":{"line":78,"column":6},"end":{"line":78,"column":39}},"47":{"start":{"line":79,"column":6},"end":{"line":79,"column":45}},"48":{"start":{"line":80,"column":6},"end":{"line":80,"column":47}},"49":{"start":{"line":81,"column":6},"end":{"line":81,"column":13}},"50":{"start":{"line":84,"column":2},"end":{"line":102,"column":5}},"51":{"start":{"line":85,"column":15},"end":{"line":93,"column":5}},"52":{"start":{"line":95,"column":4},"end":{"line":101,"column":7}},"53":{"start":{"line":96,"column":6},"end":{"line":96,"column":34}},"54":{"start":{"line":97,"column":6},"end":{"line":97,"column":39}},"55":{"start":{"line":98,"column":6},"end":{"line":98,"column":46}},"56":{"start":{"line":99,"column":6},"end":{"line":99,"column":45}},"57":{"start":{"line":100,"column":6},"end":{"line":100,"column":13}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":22,"column":17},"end":{"line":22,"column":18}},"loc":{"start":{"line":22,"column":29},"end":{"line":103,"column":1}},"line":22},"1":{"name":"(anonymous_1)","decl":{"start":{"line":23,"column":26},"end":{"line":23,"column":27}},"loc":{"start":{"line":23,"column":38},"end":{"line":27,"column":3}},"line":23},"2":{"name":"(anonymous_2)","decl":{"start":{"line":28,"column":26},"end":{"line":28,"column":27}},"loc":{"start":{"line":28,"column":42},"end":{"line":37,"column":3}},"line":28},"3":{"name":"(anonymous_3)","decl":{"start":{"line":29,"column":77},"end":{"line":29,"column":78}},"loc":{"start":{"line":29,"column":97},"end":{"line":36,"column":5}},"line":29},"4":{"name":"(anonymous_4)","decl":{"start":{"line":38,"column":35},"end":{"line":38,"column":36}},"loc":{"start":{"line":38,"column":51},"end":{"line":51,"column":3}},"line":38},"5":{"name":"(anonymous_5)","decl":{"start":{"line":41,"column":11},"end":{"line":41,"column":12}},"loc":{"start":{"line":41,"column":31},"end":{"line":50,"column":5}},"line":41},"6":{"name":"(anonymous_6)","decl":{"start":{"line":52,"column":28},"end":{"line":52,"column":29}},"loc":{"start":{"line":52,"column":44},"end":{"line":64,"column":3}},"line":52},"7":{"name":"(anonymous_7)","decl":{"start":{"line":55,"column":11},"end":{"line":55,"column":12}},"loc":{"start":{"line":55,"column":31},"end":{"line":63,"column":5}},"line":55},"8":{"name":"(anonymous_8)","decl":{"start":{"line":65,"column":21},"end":{"line":65,"column":22}},"loc":{"start":{"line":65,"column":37},"end":{"line":83,"column":3}},"line":65},"9":{"name":"(anonymous_9)","decl":{"start":{"line":76,"column":83},"end":{"line":76,"column":84}},"loc":{"start":{"line":76,"column":103},"end":{"line":82,"column":5}},"line":76},"10":{"name":"(anonymous_10)","decl":{"start":{"line":84,"column":30},"end":{"line":84,"column":31}},"loc":{"start":{"line":84,"column":46},"end":{"line":102,"column":3}},"line":84},"11":{"name":"(anonymous_11)","decl":{"start":{"line":95,"column":83},"end":{"line":95,"column":84}},"loc":{"start":{"line":95,"column":103},"end":{"line":101,"column":5}},"line":95}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"b":{},"inputSourceMap":{"version":3,"sources":["test.js"],"names":["expect","chai","assert","should","use","chaiHttp","dotenv","config","describe","it","request","app","to","be","a","done","get","end","err","res","have","status","body","an","status_code","equal","query","name","data","book","country","isbn","release_date","number_of_pages","authors","publisher","post","send","message"],"mappings":"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","sourceRoot":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\test\\","sourcesContent":["import chai from 'chai';\r\nimport chaiHttp from 'chai-http';\r\nimport dotenv from 'dotenv';\r\nimport app from '../app';\r\n\r\nconst {\r\n  expect, assert, should,\r\n} = chai;\r\nchai.use(chaiHttp);\r\ndotenv.config();\r\nshould();\r\n\r\ndescribe('Book', () => {\r\n\r\n    it('App should exists', () => {\r\n        chai.request(app);\r\n        expect(app).to.be.a('function');\r\n    });\r\n\r\n    it('Get all api books', (done) => {\r\n        chai.request(app)\r\n          .get('/api/external-books')\r\n          .end((err, res) => {\r\n            res.should.have.status(200);\r\n            expect(res.body).be.an('object');\r\n            expect(res.body.status).be.a('string');\r\n            expect(res.body.status_code).be.a('number');\r\n            assert.equal(res.body.status, 'success');\r\n            done();\r\n        });\r\n    });\r\n    it('Get one specific api books', (done) => {\r\n        chai.request(app)\r\n          .get('/api/external-books')\r\n          .query({ name: 'A Clash of Kings' })\r\n          .end((err, res) => {\r\n            res.should.have.status(200);\r\n            expect(res.body).be.an('object');\r\n            expect(res.body.status).be.a('string');\r\n            expect(res.body.status_code).be.a('number');\r\n            assert.equal(res.body.status, 'success');\r\n            assert.equal(res.body.data.name, 'A Clash of Kings');\r\n            expect(res.body.data).be.an('object');\r\n            done();\r\n        });\r\n    });\r\n    \r\n    it('incorrect book name', (done) => {\r\n        chai.request(app)\r\n          .get('/api/external-books')\r\n          .query({ name: 'A Clash Kings' })\r\n          .end((err, res) => {\r\n            res.should.have.status(200);\r\n            expect(res.body).be.an('object');\r\n            expect(res.body.status).be.a('string');\r\n            expect(res.body.status_code).be.a('number');\r\n            assert.equal(res.body.status, 'success');\r\n            expect(res.body.data).be.an('array');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('create books', (done) => {\r\n        const book = {\r\n          name: 'Okobaba Victor',\r\n          country: 'Portugal',\r\n          isbn: 849959504-2,\r\n          release_date: '2019-07-24',\r\n          number_of_pages: 26000,\r\n          authors: 'luke madu',\r\n          publisher: 'Idiot photo'\r\n        };\r\n        chai.request(app)\r\n          .post('/api/v1/books')\r\n          .send(book)\r\n          .end((err, res) => {\r\n            res.should.have.status(201);\r\n            expect(res.body).be.an('object');\r\n            expect(res.body.status).be.a('string');\r\n            assert.equal(res.body.status, 'success');\r\n            done();\r\n        });\r\n    });\r\n\r\n    it('Already Created books', (done) => {\r\n        const book = {\r\n          name: 'Okobaba Victor',\r\n          country: 'Portugal',\r\n          isbn: 849959504-2,\r\n          release_date: '2019-07-24',\r\n          number_of_pages: 26000,\r\n          authors: 'luke madu',\r\n          publisher: 'Idiot photo'\r\n        };\r\n        chai.request(app)\r\n          .post('/api/v1/books')\r\n          .send(book)\r\n          .end((err, res) => {\r\n            res.should.have.status(409);\r\n            expect(res.body).be.an('object');\r\n            expect(res.body.message).be.a('string');\r\n            assert.equal(res.body.status, 'error');\r\n            done();\r\n          });\r\n      });\r\n\r\n\r\n});"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"824e27e325702fc9c13ad9332bd52e7d21ccaa0f","contentHash":"4d8a23c154ce69448738a629ba25f617503c5332957a8053d17cf836a9827191"},"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\app.js":{"path":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\app.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":18},"end":{"line":12,"column":64}},"5":{"start":{"line":14,"column":14},"end":{"line":14,"column":55}},"6":{"start":{"line":16,"column":14},"end":{"line":16,"column":55}},"7":{"start":{"line":18,"column":14},"end":{"line":18,"column":57}},"8":{"start":{"line":20,"column":0},"end":{"line":20,"column":28}},"9":{"start":{"line":22,"column":10},"end":{"line":22,"column":36}},"10":{"start":{"line":23,"column":11},"end":{"line":23,"column":35}},"11":{"start":{"line":24,"column":0},"end":{"line":24,"column":39}},"12":{"start":{"line":25,"column":0},"end":{"line":27,"column":4}},"13":{"start":{"line":28,"column":0},"end":{"line":28,"column":40}},"14":{"start":{"line":29,"column":0},"end":{"line":31,"column":3}},"15":{"start":{"line":30,"column":2},"end":{"line":30,"column":42}},"16":{"start":{"line":32,"column":0},"end":{"line":32,"column":36}},"17":{"start":{"line":33,"column":0},"end":{"line":38,"column":3}},"18":{"start":{"line":34,"column":2},"end":{"line":37,"column":5}},"19":{"start":{"line":39,"column":0},"end":{"line":39,"column":22}},"20":{"start":{"line":40,"column":0},"end":{"line":40,"column":65}},"21":{"start":{"line":41,"column":15},"end":{"line":41,"column":18}},"22":{"start":{"line":42,"column":0},"end":{"line":42,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":29,"column":13},"end":{"line":29,"column":14}},"loc":{"start":{"line":29,"column":34},"end":{"line":31,"column":1}},"line":29},"1":{"name":"(anonymous_1)","decl":{"start":{"line":33,"column":13},"end":{"line":33,"column":14}},"loc":{"start":{"line":33,"column":33},"end":{"line":38,"column":1}},"line":33}},"branchMap":{"0":{"loc":{"start":{"line":23,"column":11},"end":{"line":23,"column":35}},"type":"binary-expr","locations":[{"start":{"line":23,"column":11},"end":{"line":23,"column":27}},{"start":{"line":23,"column":31},"end":{"line":23,"column":35}}],"line":23}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":1,"17":1,"18":0,"19":1,"20":1,"21":1,"22":1},"f":{"0":0,"1":0},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"sources":["app.js"],"names":["dotenv","config","app","port","process","env","PORT","use","bodyParser","json","urlencoded","extended","get","_req","res","status","redirect","Router","req","error","set","listen","console","log"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;AAEAA,mBAAOC,MAAP;;AACA,IAAMC,GAAG,GAAG,0BAAZ;AAEA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;AACAJ,GAAG,CAACK,GAAJ,CAAQC,uBAAWC,IAAX,EAAR;AACAP,GAAG,CAACK,GAAJ,CAAQC,uBAAWE,UAAX,CAAsB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAtB,CAAR;AACAT,GAAG,CAACK,GAAJ,CAAQ,wBAAO,KAAP,CAAR;AAEAL,GAAG,CAACU,GAAJ,CAAQ,GAAR,EAAa,UAACC,IAAD,EAAOC,GAAP;AAAA,SAAeA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyB,MAAzB,CAAf;AAAA,CAAb;AACAd,GAAG,CAACK,GAAJ,CAAQ,MAAR,EAAgBU,kBAAhB;AAIAf,GAAG,CAACK,GAAJ,CAAQ,GAAR,EAAa,UAACW,GAAD,EAAMJ,GAAN;AAAA,SAAcA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB;AAC5CM,IAAAA,MAAM,EAAE,OADoC;AAE5CI,IAAAA,KAAK,EAAE;AAFqC,GAArB,CAAd;AAAA,CAAb;AAKAjB,GAAG,CAACkB,GAAJ,CAAQ,MAAR,EAAgBjB,IAAhB;AACAD,GAAG,CAACmB,MAAJ,CAAWlB,IAAX,EAAiBmB,OAAO,CAACC,GAAR,6BAAiCpB,IAAjC,EAAjB;eACeD,G","sourceRoot":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\","sourcesContent":["import express from 'express';\r\nimport bodyParser from 'body-parser';\r\nimport logger from 'morgan';\r\nimport dotenv from 'dotenv';\r\n\r\nimport Router from './routes'\r\n\r\ndotenv.config();\r\nconst app = express();\r\n\r\nconst port = process.env.PORT || 8080;\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: true }));\r\napp.use(logger('dev'));\r\n\r\napp.get('/', (_req, res) => res.status(301).redirect('/api'));\r\napp.use('/api', Router);\r\n\r\n\r\n\r\napp.use('*', (req, res) => res.status(404).json({\r\n    status: 'Error',\r\n    error: 'Sorry!!, the page you are looking for cannot be found',\r\n}));\r\n\r\napp.set('port', port);\r\napp.listen(port, console.log(`listening to port ${port}`));\r\nexport default app;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e97438c24347102213ab6e54a5b692f184ebc4b8","contentHash":"144323d763641e5a1d959cb1bd5ec1c6d0ea477d52a15c2841cda7a321b3acca"},"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\routes\\index.js":{"path":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\routes\\index.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":13},"end":{"line":12,"column":68}},"5":{"start":{"line":14,"column":13},"end":{"line":14,"column":67}},"6":{"start":{"line":16,"column":16},"end":{"line":16,"column":43}},"7":{"start":{"line":17,"column":24},"end":{"line":17,"column":59}},"8":{"start":{"line":19,"column":13},"end":{"line":19,"column":41}},"9":{"start":{"line":21,"column":0},"end":{"line":23,"column":3}},"10":{"start":{"line":22,"column":2},"end":{"line":22,"column":44}},"11":{"start":{"line":24,"column":0},"end":{"line":29,"column":3}},"12":{"start":{"line":25,"column":2},"end":{"line":28,"column":5}},"13":{"start":{"line":30,"column":0},"end":{"line":30,"column":58}},"14":{"start":{"line":31,"column":0},"end":{"line":31,"column":85}},"15":{"start":{"line":32,"column":15},"end":{"line":32,"column":21}},"16":{"start":{"line":33,"column":0},"end":{"line":33,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":21,"column":16},"end":{"line":21,"column":17}},"loc":{"start":{"line":21,"column":36},"end":{"line":23,"column":1}},"line":21},"1":{"name":"(anonymous_1)","decl":{"start":{"line":24,"column":18},"end":{"line":24,"column":19}},"loc":{"start":{"line":24,"column":38},"end":{"line":29,"column":1}},"line":24}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":1,"12":0,"13":1,"14":1,"15":1,"16":1},"f":{"0":0,"1":0},"b":{},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["validator","valid","validationHandler","Router","express","get","req","res","status","redirect","json","message","books","Books","external","post","createBook"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;IAGQA,S,GAAiCC,iB,CAAjCD,S;IAAWE,iB,GAAsBD,iB,CAAtBC,iB;;AAEnB,IAAMC,MAAM,GAAGC,oBAAQD,MAAR,EAAf;;AAEAA,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN;AAAA,SAAcA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,QAAhB,CAAyB,QAAzB,CAAd;AAAA,CAAhB;AACAN,MAAM,CAACE,GAAP,CAAW,KAAX,EAAkB,UAACC,GAAD,EAAMC,GAAN;AAAA,SAAcA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBE,IAAhB,CAAqB;AACjDC,IAAAA,OAAO,EAAE,yBADwC;AAEjDC,IAAAA,KAAK,EAAE;AAF0C,GAArB,CAAd;AAAA,CAAlB;AAMAT,MAAM,CAACE,GAAP,CAAW,iBAAX,EAA8BQ,kBAAMC,QAApC;AACAX,MAAM,CAACY,IAAP,CAAY,WAAZ,EAAyBf,SAAzB,EAAoCE,iBAApC,EAAuDW,kBAAMG,UAA7D;eAEeb,M","sourceRoot":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\routes\\","sourcesContent":["import express from 'express';\r\nimport Books from '../controllers/books';\r\nimport valid from '../middleware/valid';\r\n\r\n\r\nconst { validator, validationHandler } = valid;\r\n\r\nconst Router = express.Router();\r\n\r\nRouter.get('/', (req, res) => res.status(301).redirect('api/v1'));\r\nRouter.get('/v1', (req, res) => res.status(200).json({\r\n    message: 'WELCOME TO ICE and FIRE',\r\n    books: 'https://www.anapioficeandfire.com/api/books',\r\n}));\r\n\r\n\r\nRouter.get('/external-books', Books.external);\r\nRouter.post('/v1/books', validator, validationHandler, Books.createBook);\r\n\r\nexport default Router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5f31c9d00aa1540af133943affd05a0286966107","contentHash":"df5a21a248dd118562002ed9f80b25f66c8b3829e102bf4353b5f6487788587b"},"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\controllers\\books.js":{"path":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\controllers\\books.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":19},"end":{"line":10,"column":80}},"4":{"start":{"line":12,"column":25},"end":{"line":12,"column":99}},"5":{"start":{"line":14,"column":13},"end":{"line":14,"column":53}},"6":{"start":{"line":16,"column":20},"end":{"line":16,"column":79}},"7":{"start":{"line":18,"column":13},"end":{"line":18,"column":58}},"8":{"start":{"line":19,"column":12},"end":{"line":179,"column":1}},"9":{"start":{"line":21,"column":4},"end":{"line":113,"column":10}},"10":{"start":{"line":24,"column":6},"end":{"line":112,"column":35}},"11":{"start":{"line":25,"column":8},"end":{"line":111,"column":9}},"12":{"start":{"line":26,"column":10},"end":{"line":110,"column":11}},"13":{"start":{"line":28,"column":14},"end":{"line":28,"column":32}},"14":{"start":{"line":29,"column":14},"end":{"line":29,"column":32}},"15":{"start":{"line":30,"column":14},"end":{"line":30,"column":51}},"16":{"start":{"line":33,"column":14},"end":{"line":33,"column":47}},"17":{"start":{"line":34,"column":14},"end":{"line":34,"column":43}},"18":{"start":{"line":35,"column":14},"end":{"line":35,"column":36}},"19":{"start":{"line":36,"column":14},"end":{"line":53,"column":17}},"20":{"start":{"line":37,"column":27},"end":{"line":37,"column":36}},"21":{"start":{"line":38,"column":27},"end":{"line":38,"column":36}},"22":{"start":{"line":39,"column":30},"end":{"line":39,"column":42}},"23":{"start":{"line":40,"column":38},"end":{"line":40,"column":56}},"24":{"start":{"line":41,"column":32},"end":{"line":41,"column":46}},"25":{"start":{"line":42,"column":30},"end":{"line":42,"column":42}},"26":{"start":{"line":43,"column":35},"end":{"line":43,"column":48}},"27":{"start":{"line":44,"column":16},"end":{"line":52,"column":18}},"28":{"start":{"line":55,"column":14},"end":{"line":58,"column":15}},"29":{"start":{"line":56,"column":16},"end":{"line":56,"column":34}},"30":{"start":{"line":57,"column":16},"end":{"line":57,"column":22}},"31":{"start":{"line":60,"column":14},"end":{"line":64,"column":18}},"32":{"start":{"line":67,"column":14},"end":{"line":70,"column":15}},"33":{"start":{"line":68,"column":16},"end":{"line":68,"column":35}},"34":{"start":{"line":69,"column":16},"end":{"line":69,"column":22}},"35":{"start":{"line":72,"column":14},"end":{"line":75,"column":17}},"36":{"start":{"line":73,"column":31},"end":{"line":73,"column":41}},"37":{"start":{"line":74,"column":16},"end":{"line":74,"column":41}},"38":{"start":{"line":77,"column":14},"end":{"line":80,"column":15}},"39":{"start":{"line":78,"column":16},"end":{"line":78,"column":35}},"40":{"start":{"line":79,"column":16},"end":{"line":79,"column":22}},"41":{"start":{"line":82,"column":14},"end":{"line":86,"column":18}},"42":{"start":{"line":89,"column":14},"end":{"line":93,"column":18}},"43":{"start":{"line":96,"column":14},"end":{"line":96,"column":33}},"44":{"start":{"line":97,"column":14},"end":{"line":97,"column":20}},"45":{"start":{"line":100,"column":14},"end":{"line":100,"column":33}},"46":{"start":{"line":101,"column":14},"end":{"line":101,"column":49}},"47":{"start":{"line":102,"column":14},"end":{"line":105,"column":18}},"48":{"start":{"line":109,"column":14},"end":{"line":109,"column":37}},"49":{"start":{"line":116,"column":4},"end":{"line":177,"column":10}},"50":{"start":{"line":119,"column":6},"end":{"line":176,"column":36}},"51":{"start":{"line":120,"column":8},"end":{"line":175,"column":9}},"52":{"start":{"line":121,"column":10},"end":{"line":174,"column":11}},"53":{"start":{"line":123,"column":14},"end":{"line":123,"column":33}},"54":{"start":{"line":124,"column":14},"end":{"line":124,"column":256}},"55":{"start":{"line":125,"column":14},"end":{"line":128,"column":16}},"56":{"start":{"line":129,"column":14},"end":{"line":129,"column":33}},"57":{"start":{"line":130,"column":14},"end":{"line":130,"column":63}},"58":{"start":{"line":133,"column":14},"end":{"line":133,"column":47}},"59":{"start":{"line":134,"column":14},"end":{"line":134,"column":42}},"60":{"start":{"line":136,"column":14},"end":{"line":139,"column":15}},"61":{"start":{"line":137,"column":16},"end":{"line":137,"column":35}},"62":{"start":{"line":138,"column":16},"end":{"line":138,"column":22}},"63":{"start":{"line":141,"column":14},"end":{"line":144,"column":18}},"64":{"start":{"line":147,"column":14},"end":{"line":150,"column":16}},"65":{"start":{"line":151,"column":14},"end":{"line":151,"column":34}},"66":{"start":{"line":152,"column":14},"end":{"line":152,"column":65}},"67":{"start":{"line":155,"column":14},"end":{"line":155,"column":48}},"68":{"start":{"line":156,"column":14},"end":{"line":156,"column":47}},"69":{"start":{"line":157,"column":14},"end":{"line":161,"column":18}},"70":{"start":{"line":164,"column":14},"end":{"line":164,"column":34}},"71":{"start":{"line":165,"column":14},"end":{"line":165,"column":51}},"72":{"start":{"line":166,"column":14},"end":{"line":169,"column":18}},"73":{"start":{"line":173,"column":14},"end":{"line":173,"column":38}},"74":{"start":{"line":180,"column":15},"end":{"line":180,"column":20}},"75":{"start":{"line":181,"column":0},"end":{"line":181,"column":30}}},"fnMap":{"0":{"name":"external","decl":{"start":{"line":20,"column":21},"end":{"line":20,"column":29}},"loc":{"start":{"line":20,"column":40},"end":{"line":114,"column":3}},"line":20},"1":{"name":"_callee","decl":{"start":{"line":21,"column":98},"end":{"line":21,"column":105}},"loc":{"start":{"line":21,"column":108},"end":{"line":113,"column":5}},"line":21},"2":{"name":"_callee$","decl":{"start":{"line":24,"column":51},"end":{"line":24,"column":59}},"loc":{"start":{"line":24,"column":70},"end":{"line":112,"column":7}},"line":24},"3":{"name":"(anonymous_3)","decl":{"start":{"line":36,"column":33},"end":{"line":36,"column":34}},"loc":{"start":{"line":36,"column":49},"end":{"line":53,"column":15}},"line":36},"4":{"name":"(anonymous_4)","decl":{"start":{"line":72,"column":38},"end":{"line":72,"column":39}},"loc":{"start":{"line":72,"column":55},"end":{"line":75,"column":15}},"line":72},"5":{"name":"createBook","decl":{"start":{"line":115,"column":23},"end":{"line":115,"column":33}},"loc":{"start":{"line":115,"column":44},"end":{"line":178,"column":3}},"line":115},"6":{"name":"_callee2","decl":{"start":{"line":116,"column":98},"end":{"line":116,"column":106}},"loc":{"start":{"line":116,"column":109},"end":{"line":177,"column":5}},"line":116},"7":{"name":"_callee2$","decl":{"start":{"line":119,"column":51},"end":{"line":119,"column":60}},"loc":{"start":{"line":119,"column":72},"end":{"line":176,"column":7}},"line":119}},"branchMap":{"0":{"loc":{"start":{"line":26,"column":10},"end":{"line":110,"column":11}},"type":"switch","locations":[{"start":{"line":27,"column":12},"end":{"line":30,"column":51}},{"start":{"line":32,"column":12},"end":{"line":64,"column":18}},{"start":{"line":66,"column":12},"end":{"line":86,"column":18}},{"start":{"line":88,"column":12},"end":{"line":93,"column":18}},{"start":{"line":95,"column":12},"end":{"line":97,"column":20}},{"start":{"line":99,"column":12},"end":{"line":105,"column":18}},{"start":{"line":107,"column":12},"end":{"line":107,"column":20}},{"start":{"line":108,"column":12},"end":{"line":109,"column":37}}],"line":26},"1":{"loc":{"start":{"line":55,"column":14},"end":{"line":58,"column":15}},"type":"if","locations":[{"start":{"line":55,"column":14},"end":{"line":58,"column":15}},{"start":{"line":55,"column":14},"end":{"line":58,"column":15}}],"line":55},"2":{"loc":{"start":{"line":67,"column":14},"end":{"line":70,"column":15}},"type":"if","locations":[{"start":{"line":67,"column":14},"end":{"line":70,"column":15}},{"start":{"line":67,"column":14},"end":{"line":70,"column":15}}],"line":67},"3":{"loc":{"start":{"line":77,"column":14},"end":{"line":80,"column":15}},"type":"if","locations":[{"start":{"line":77,"column":14},"end":{"line":80,"column":15}},{"start":{"line":77,"column":14},"end":{"line":80,"column":15}}],"line":77},"4":{"loc":{"start":{"line":121,"column":10},"end":{"line":174,"column":11}},"type":"switch","locations":[{"start":{"line":122,"column":12},"end":{"line":130,"column":63}},{"start":{"line":132,"column":12},"end":{"line":144,"column":18}},{"start":{"line":146,"column":12},"end":{"line":152,"column":65}},{"start":{"line":154,"column":12},"end":{"line":161,"column":18}},{"start":{"line":163,"column":12},"end":{"line":169,"column":18}},{"start":{"line":171,"column":12},"end":{"line":171,"column":20}},{"start":{"line":172,"column":12},"end":{"line":173,"column":38}}],"line":121},"5":{"loc":{"start":{"line":136,"column":14},"end":{"line":139,"column":15}},"type":"if","locations":[{"start":{"line":136,"column":14},"end":{"line":139,"column":15}},{"start":{"line":136,"column":14},"end":{"line":139,"column":15}}],"line":136}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":3,"10":3,"11":9,"12":12,"13":3,"14":3,"15":3,"16":3,"17":3,"18":3,"19":3,"20":30,"21":30,"22":30,"23":30,"24":30,"25":30,"26":30,"27":30,"28":3,"29":2,"30":2,"31":1,"32":2,"33":0,"34":0,"35":2,"36":12,"37":12,"38":2,"39":1,"40":1,"41":1,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":3,"49":2,"50":2,"51":7,"52":8,"53":2,"54":2,"55":2,"56":2,"57":2,"58":2,"59":2,"60":2,"61":1,"62":1,"63":1,"64":1,"65":1,"66":1,"67":1,"68":1,"69":1,"70":0,"71":0,"72":0,"73":2,"74":1,"75":1},"f":{"0":3,"1":3,"2":9,"3":30,"4":12,"5":2,"6":2,"7":7},"b":{"0":[3,3,2,1,0,0,0,3],"1":[2,1],"2":[0,2],"3":[1,1],"4":[2,2,1,1,0,0,2],"5":[1,1]},"inputSourceMap":{"version":3,"sources":["books.js"],"names":["apiUrl","Books","external","req","res","axios","get","data","name","query","newData","map","isbn","authors","number_of_pages","numberOfPages","publisher","country","release_date","released","status","json","status_code","nameData","find","itemName","message","createBook","body","checkBook","text","values","db","rows","createQuery","postBook"],"mappings":"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","sourceRoot":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\controllers\\","sourcesContent":["import axios from 'axios';\r\nimport db from '../database/dbconnection';\r\n\r\nconst apiUrl = 'https://www.anapioficeandfire.com/api/books';\r\n\r\nconst Books = {\r\n    async external(req, res) {\r\n        try {\r\n            const {data} = await axios.get(apiUrl);\r\n            const { name } = req.query;\r\n            const newData = data.map(({name, isbn, authors, numberOfPages:number_of_pages, publisher, country, released:release_date}) => {\r\n                return {name, isbn, authors, number_of_pages, publisher, country, release_date}\r\n            })\r\n            if (!name) {\r\n                return res.status(200).json({\r\n                    status_code: 200,\r\n                    status: 'success',\r\n                    data: newData,\r\n                });\r\n            } \r\n            if (name){\r\n                const nameData = newData.find(({name:itemName}) => itemName === name);\r\n                if (nameData) {\r\n                    return res.status(200).json({\r\n                        status_code: 200,\r\n                        status: 'success',\r\n                        data: nameData,\r\n                    });\r\n                } return res.status(200).json({\r\n                    status_code: 200,\r\n                    status: 'success',\r\n                    data: [],\r\n                });\r\n            }\r\n        } catch (error) {\r\n            return res.status(500).json({\r\n                status: 'error',\r\n                message: (error.message),\r\n            });\r\n        }\r\n        \r\n    },\r\n\r\n    async createBook(req, res) {\r\n        try {\r\n            const {\r\n                name, isbn, authors, country, number_of_pages, publisher, release_date,\r\n            } = req.body;\r\n            const checkBook = {\r\n                text: 'SELECT * FROM books where name = $1 AND isbn = $2 AND authors = $3 AND country = $4 AND number_of_pages = $5 AND publisher = $6 AND release_date = $7',\r\n                values: [name, isbn, authors, country, number_of_pages, publisher, release_date],\r\n            };\r\n            const { rows } = await db.query(checkBook)\r\n            if (rows[0]) {\r\n                return res.status(409).json({\r\n                    status: 'error',\r\n                    message: 'Book already created',\r\n                });\r\n            }\r\n            const createQuery = {\r\n                text: 'INSERT INTO books(name, isbn, authors, country, number_of_pages, publisher, release_date) VALUES($1, $2, $3, $4, $5, $6, $7) RETURNING *',\r\n                values: [name, isbn, authors, country, number_of_pages, publisher, release_date],\r\n            };\r\n            const { rows: postBook } = await db.query(createQuery)\r\n            return res.status(201).json({\r\n                status_code: 201,\r\n                status: 'success',\r\n                data: postBook,\r\n            });\r\n        } catch (error) {\r\n            return res.status(500).json({\r\n                status: 'error',\r\n                message: (error.message),\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport default Books;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"25dc183db303aabded1f49052ea9619ac5d75c64","contentHash":"f7d0560f478ff0c60b8e7442cab572f29ed13c989cf4967ef98fbdbd07543d30"},"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\database\\dbconnection.js":{"path":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\database\\dbconnection.js","statementMap":{"0":{"start":{"line":3,"column":29},"end":{"line":3,"column":84}},"1":{"start":{"line":5,"column":0},"end":{"line":7,"column":3}},"2":{"start":{"line":8,"column":0},"end":{"line":8,"column":28}},"3":{"start":{"line":10,"column":10},"end":{"line":10,"column":23}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":55}},"5":{"start":{"line":14,"column":0},"end":{"line":14,"column":28}},"6":{"start":{"line":16,"column":19},"end":{"line":16,"column":30}},"7":{"start":{"line":17,"column":14},"end":{"line":17,"column":34}},"8":{"start":{"line":18,"column":18},"end":{"line":18,"column":42}},"9":{"start":{"line":19,"column":14},"end":{"line":19,"column":34}},"10":{"start":{"line":20,"column":14},"end":{"line":20,"column":34}},"11":{"start":{"line":21,"column":14},"end":{"line":21,"column":34}},"12":{"start":{"line":23,"column":16},"end":{"line":30,"column":1}},"13":{"start":{"line":31,"column":17},"end":{"line":38,"column":1}},"14":{"start":{"line":40,"column":0},"end":{"line":44,"column":1}},"15":{"start":{"line":41,"column":2},"end":{"line":41,"column":26}},"16":{"start":{"line":43,"column":2},"end":{"line":43,"column":25}},"17":{"start":{"line":46,"column":19},"end":{"line":46,"column":43}},"18":{"start":{"line":47,"column":15},"end":{"line":47,"column":27}},"19":{"start":{"line":48,"column":0},"end":{"line":48,"column":30}}},"fnMap":{},"branchMap":{"0":{"loc":{"start":{"line":40,"column":0},"end":{"line":44,"column":1}},"type":"if","locations":[{"start":{"line":40,"column":0},"end":{"line":44,"column":1}},{"start":{"line":40,"column":0},"end":{"line":44,"column":1}}],"line":40}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":0,"17":1,"18":1,"19":1},"f":{},"b":{"0":[1,0]},"inputSourceMap":{"version":3,"sources":["dbconnection.js"],"names":["dotenv","config","process","env","DB_USER","DB_PASSWORD","DB_NAME","DB_PORT","DB_TEST","connection","devConfig","user","database","password","port","max","idleTimeoutMillis","testConfig","NODE_ENV","dbconnection","Pool"],"mappings":";;;;;;;;;AAAA;;AACA;;AAEAA,mBAAOC,MAAP;;mBAIIC,OAAO,CAACC,G;IADVC,O,gBAAAA,O;IAASC,W,gBAAAA,W;IAAaC,O,gBAAAA,O;IAASC,O,gBAAAA,O;IAASC,O,gBAAAA,O;AAE1C,IAAIC,UAAJ;AAEA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,IAAI,EAAEP,OADU;AAEhBQ,EAAAA,QAAQ,EAAEN,OAFM;AAGhBO,EAAAA,QAAQ,EAAER,WAHM;AAIhBS,EAAAA,IAAI,EAAEP,OAJU;AAKhBQ,EAAAA,GAAG,EAAE,EALW;AAMhBC,EAAAA,iBAAiB,EAAE;AANH,CAAlB;AASA,IAAMC,UAAU,GAAG;AACjBN,EAAAA,IAAI,EAAEP,OADW;AAEjBQ,EAAAA,QAAQ,EAAEJ,OAFO;AAGjBK,EAAAA,QAAQ,EAAER,WAHO;AAIjBS,EAAAA,IAAI,EAAEP,OAJW;AAKjBQ,EAAAA,GAAG,EAAE,EALY;AAMjBC,EAAAA,iBAAiB,EAAE;AANF,CAAnB;;AAQA,IAAId,OAAO,CAACC,GAAR,CAAYe,QAAZ,KAAyB,MAA7B,EAAqC;AACnCT,EAAAA,UAAU,GAAGQ,UAAb;AACD,CAFD,MAEO;AACLR,EAAAA,UAAU,GAAGC,SAAb;AACD;;AAED,IAAMS,YAAY,GAAG,IAAIC,QAAJ,CAASX,UAAT,CAArB;eAEeU,Y","sourceRoot":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\database\\","sourcesContent":["import { Pool } from 'pg';\r\nimport dotenv from 'dotenv';\r\n\r\ndotenv.config();\r\n\r\nconst {\r\n  DB_USER, DB_PASSWORD, DB_NAME, DB_PORT, DB_TEST,\r\n} = process.env;\r\nlet connection;\r\n\r\nconst devConfig = {\r\n  user: DB_USER,\r\n  database: DB_NAME,\r\n  password: DB_PASSWORD,\r\n  port: DB_PORT,\r\n  max: 10,\r\n  idleTimeoutMillis: 3000,\r\n};\r\n\r\nconst testConfig = {\r\n  user: DB_USER,\r\n  database: DB_TEST,\r\n  password: DB_PASSWORD,\r\n  port: DB_PORT,\r\n  max: 10,\r\n  idleTimeoutMillis: 3000,\r\n};\r\nif (process.env.NODE_ENV === 'test') {\r\n  connection = testConfig;\r\n} else {\r\n  connection = devConfig;\r\n}\r\n\r\nconst dbconnection = new Pool(connection);\r\n\r\nexport default dbconnection;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"41c78ee20db14a31bee0e557dd15821a5ae414b6","contentHash":"80b7cfcd0ad3564d0ca65618735db55ab589bed6bcbe0a30070222e2a02f6af6"},"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\middleware\\valid.js":{"path":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\middleware\\valid.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":28}},"2":{"start":{"line":8,"column":24},"end":{"line":8,"column":52}},"3":{"start":{"line":10,"column":16},"end":{"line":10,"column":859}},"4":{"start":{"line":12,"column":24},"end":{"line":25,"column":1}},"5":{"start":{"line":13,"column":15},"end":{"line":13,"column":59}},"6":{"start":{"line":15,"column":2},"end":{"line":22,"column":3}},"7":{"start":{"line":16,"column":4},"end":{"line":21,"column":7}},"8":{"start":{"line":19,"column":8},"end":{"line":19,"column":25}},"9":{"start":{"line":24,"column":2},"end":{"line":24,"column":16}},"10":{"start":{"line":27,"column":12},"end":{"line":30,"column":1}},"11":{"start":{"line":31,"column":15},"end":{"line":31,"column":20}},"12":{"start":{"line":32,"column":0},"end":{"line":32,"column":30}}},"fnMap":{"0":{"name":"validationHandler","decl":{"start":{"line":12,"column":33},"end":{"line":12,"column":50}},"loc":{"start":{"line":12,"column":67},"end":{"line":25,"column":1}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":18,"column":32},"end":{"line":18,"column":33}},"loc":{"start":{"line":18,"column":49},"end":{"line":20,"column":7}},"line":18}},"branchMap":{"0":{"loc":{"start":{"line":15,"column":2},"end":{"line":22,"column":3}},"type":"if","locations":[{"start":{"line":15,"column":2},"end":{"line":22,"column":3}},{"start":{"line":15,"column":2},"end":{"line":22,"column":3}}],"line":15}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":2,"7":0,"8":0,"9":2,"10":1,"11":1,"12":1},"f":{"0":2,"1":0},"b":{"0":[0,2]},"inputSourceMap":{"version":3,"sources":["valid.js"],"names":["validator","not","isEmpty","withMessage","isNumeric","validationHandler","req","res","next","errors","status","json","error","array","map","msg","valid"],"mappings":";;;;;;;AAAA;;AAEA,IAAMA,SAAS,GAAG,CAChB,6BAAM,MAAN,EAAcC,GAAd,GAAoBC,OAApB,GAA8BC,WAA9B,CAA0C,kCAA1C,CADgB,EAEhB,6BAAM,MAAN,EAAcF,GAAd,GAAoBC,OAApB,GAA8BC,WAA9B,CAA0C,6BAA1C,CAFgB,EAGhB,6BAAM,SAAN,EAAiBF,GAAjB,GAAuBC,OAAvB,GAAiCC,WAAjC,CAA6C,mCAA7C,CAHgB,EAIhB,6BAAM,WAAN,EAAmBF,GAAnB,GAAyBC,OAAzB,GAAmCC,WAAnC,CAA+C,kCAA/C,CAJgB,EAKhB,6BAAM,SAAN,EAAiBF,GAAjB,GAAuBC,OAAvB,GAAiCC,WAAjC,CAA6C,2BAA7C,CALgB,EAMhB,6BAAM,iBAAN,EAAyBF,GAAzB,GAA+BC,OAA/B,GAAyCC,WAAzC,CAAqD,gCAArD,CANgB,EAOhB,6BAAM,cAAN,EAAsBF,GAAtB,GAA4BC,OAA5B,GAAsCC,WAAtC,CAAkD,qCAAlD,CAPgB,EAQhB,6BAAM,iBAAN,EAAyBC,SAAzB,GAAqCD,WAArC,CAAiD,kCAAjD,CARgB,CAAlB;;AAWA,IAAME,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1C,MAAMC,MAAM,GAAG,wCAAiBH,GAAjB,CAAf;;AACA,MAAI,CAACG,MAAM,CAACP,OAAP,EAAL,EAAuB;AACrB,WAAOK,GAAG,CAACG,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,MAAAA,MAAM,EAAE,OADkB;AAE1BE,MAAAA,KAAK,EAAEH,MAAM,CAACI,KAAP,GAAeC,GAAf,CAAmB,UAAAF,KAAK;AAAA,eAAIA,KAAK,CAACG,GAAV;AAAA,OAAxB,EAAuC,CAAvC;AAFmB,KAArB,CAAP;AAID;;AACD,SAAOP,IAAI,EAAX;AACD,CATH;;AAWE,IAAMQ,KAAK,GAAG;AACZX,EAAAA,iBAAiB,EAAjBA,iBADY;AAEZL,EAAAA,SAAS,EAATA;AAFY,CAAd;eAMegB,K","sourceRoot":"C:\\Users\\Victor Okorie\\Documents\\APItest\\src\\middleware\\","sourcesContent":["import { check, validationResult } from 'express-validator';\r\n\r\nconst validator = [\r\n  check('name').not().isEmpty().withMessage('Book name field cannot be empty.'),\r\n  check('isbn').not().isEmpty().withMessage('ISBN field cannot be empty.'),\r\n  check('authors').not().isEmpty().withMessage('Author name field cannot be empty'),\r\n  check('publisher').not().isEmpty().withMessage('Publisher field cannot be empty.'),\r\n  check('country').not().isEmpty().withMessage('Country should be inputed'),\r\n  check('number_of_pages').not().isEmpty().withMessage('Number of pages field is empty'),\r\n  check('release_date').not().isEmpty().withMessage('release date field cannot be empty.'),\r\n  check('number_of_pages').isNumeric().withMessage('Page numbers can only be numeric')\r\n];\r\n\r\nconst validationHandler = (req, res, next) => {\r\n    const errors = validationResult(req);\r\n    if (!errors.isEmpty()) {\r\n      return res.status(400).json({\r\n        status: 'error',\r\n        error: errors.array().map(error => error.msg)[0],\r\n      });\r\n    }\r\n    return next();\r\n  };\r\n  \r\n  const valid = {\r\n    validationHandler,\r\n    validator,\r\n  };\r\n  \r\n  \r\n  export default valid;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c952586c471371d696424ad5a8cc1328833d3585","contentHash":"4fd2e4821f8b99f13e1b7cafa110bb64350866e0286f857a426462784719e588"}}